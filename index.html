<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MTI Automation</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --ios-bg: #000000;
            --ios-secondary-bg: #1C1C1E;
            --ios-tertiary-bg: #2C2C2E;
            --ios-blue: #0A84FF;
            --ios-gray: #8E8E93;
            --ios-text: #FFFFFF;
            --ios-border: rgba(255, 255, 255, 0.1);
            --safe-area-top: env(safe-area-inset-top);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            background: var(--ios-bg);
            color: var(--ios-text);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 0;
            line-height: 1.4;
            overflow-x: hidden;
        }

        /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≤—Å–µ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .app-container {
            padding: calc(var(--safe-area-top) + 20px) 16px 40px 16px;
            max-width: 500px;
            margin: 0 auto;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s;
        }

        header { margin-bottom: 28px; padding-left: 4px; }
        
        h1 { font-size: 34px; font-weight: 700; margin: 0; letter-spacing: -0.5px; }
        
        .subtitle { color: var(--ios-gray); font-size: 17px; margin-top: 4px; }

        /* –°–µ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π */
        .category-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            width: 100%;
        }

        .ios-card {
            background: var(--ios-secondary-bg);
            border-radius: 22px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border: 0.5px solid var(--ios-border);
            aspect-ratio: 1 / 1.1;
            transition: transform 0.1s ease, background-color 0.2s;
        }

        .ios-card:active {
            transform: scale(0.96);
            background-color: var(--ios-tertiary-bg);
        }

        .card-icon {
            font-size: 36px;
            background: rgba(255,255,255,0.05);
            width: 56px;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 14px;
            margin-bottom: 12px;
        }

        .card-title { font-size: 19px; font-weight: 600; margin-bottom: 4px; }
        
        .card-desc { font-size: 13px; color: var(--ios-gray); line-height: 1.2; }

        /* –≠–∫—Ä–∞–Ω –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ */
        #setup-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--ios-bg);
            z-index: 100;
            transform: translateX(100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            padding: calc(var(--safe-area-top) + 20px) 16px;
            overflow-y: auto;
        }

        #setup-screen.active { transform: translateX(0); }

        /* –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –≤ —Å—Ç–∏–ª–µ iOS Settings */
        .ios-group-title {
            font-size: 13px;
            color: var(--ios-gray);
            text-transform: uppercase;
            margin: 0 0 8px 16px;
        }

        .ios-group {
            background: var(--ios-secondary-bg);
            border-radius: 12px;
            overflow: hidden;
            margin-bottom: 24px;
            border: 0.5px solid var(--ios-border);
        }

        .ios-row {
            padding: 12px 16px;
            border-bottom: 0.5px solid var(--ios-border);
            display: flex;
            align-items: center;
        }

        .ios-row:last-child { border-bottom: none; }

        .ios-row label {
            width: 110px;
            font-size: 17px;
            color: var(--ios-text);
        }

        .ios-row input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--ios-blue);
            font-size: 17px;
            outline: none;
            text-align: right;
        }

        .ios-row input::placeholder { color: #48484A; }

        /* –ö–Ω–æ–ø–∫–∞ */
        .ios-btn-container {
            padding: 0 16px;
            margin-top: 32px;
        }

        .ios-btn-main {
            background: var(--ios-blue);
            color: white;
            border: none;
            border-radius: 14px;
            padding: 16px;
            font-size: 17px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .ios-btn-main:active { opacity: 0.8; }

        .trial-info {
            font-size: 13px;
            color: var(--ios-gray);
            text-align: center;
            margin-top: 16px;
            padding: 0 20px;
        }

        .mti-logo {
            text-align: center;
            margin-top: auto;
            padding-top: 40px;
            opacity: 0.3;
            font-weight: 800;
            letter-spacing: 2px;
            font-size: 14px;
        }
    </style>
</head>
<body>

    <div id="main-screen" class="app-container">
        <header>
            <h1>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h1>
            <p class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ñ–µ—Ä—É –±–∏–∑–Ω–µ—Å–∞</p>
        </header>

        <div class="category-grid">
            <div class="ios-card" onclick="openSetup('–ë—å—é—Ç–∏', '‚ú®')">
                <div class="card-icon">‚ú®</div>
                <div>
                    <div class="card-title">–ë—å—é—Ç–∏</div>
                    <div class="card-desc">–ó–∞–ø–∏—Å—å, —É—Å–ª—É–≥–∏ –∏ –ª–æ—è–ª—å–Ω–æ—Å—Ç—å</div>
                </div>
            </div>
            <div class="ios-card" onclick="openSetup('–ö—Ä–∏–ø—Ç–æ', 'üíé')">
                <div class="card-icon">üíé</div>
                <div>
                    <div class="card-title">–ö—Ä–∏–ø—Ç–æ</div>
                    <div class="card-desc">DAO, —Å–∏–≥–Ω–∞–ª—ã –∏ –∫–æ—à–µ–ª—å–∫–∏</div>
                </div>
            </div>
            <div class="ios-card" onclick="openSetup('–ú–∞–≥–∞–∑–∏–Ω', 'üõçÔ∏è')">
                <div class="card-icon">üõçÔ∏è</div>
                <div>
                    <div class="card-title">–ú–∞—Ä–∫–µ—Ç</div>
                    <div class="card-desc">–ü—Ä–æ–¥–∞–∂–∏ –∏ –∫–æ—Ä–∑–∏–Ω–∞</div>
                </div>
            </div>
            <div class="ios-card" onclick="openSetup('–ò–Ω—Ñ–æ', 'üìö')">
                <div class="card-icon">üìö</div>
                <div>
                    <div class="card-title">–ö—É—Ä—Å—ã</div>
                    <div class="card-desc">–û–±—É—á–µ–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø</div>
                </div>
            </div>
        </div>
        
        <div class="mti-logo">MTI AUTOMATION</div>
    </div>

    <div id="setup-screen">
        <header>
            <h1 id="setup-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞</h1>
            <p class="subtitle" id="setup-subtitle">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞</p>
        </header>

        <div class="ios-group-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
        <div class="ios-group">
            <div class="ios-row">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                <input type="text" id="proj-name" placeholder="–ù–∞–ø—Ä: MyBeautyBot">
            </div>
            <div class="ios-row">
                <label>API –¢–æ–∫–µ–Ω</label>
                <input type="text" id="bot-token" placeholder="–∏–∑ @BotFather">
            </div>
        </div>

        <div class="ios-group-title">–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω</div>
        <div class="ios-group">
            <div class="ios-row" style="justify-content: space-between;">
                <span style="font-size: 17px;">–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥</span>
                <span style="color: var(--ios-gray);">7 –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
            </div>
            <div class="ios-row" style="justify-content: space-between;">
                <span style="font-size: 17px;">–°—Ç–æ–∏–º–æ—Å—Ç—å</span>
                <span style="font-weight: 600;">0 ‚ÇΩ</span>
            </div>
        </div>

        <div class="ios-btn-container">
            <button class="ios-btn-main" onclick="launchBot()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
            <p class="trial-info">–ü–æ—Å–ª–µ 7 –¥–Ω–µ–π ‚Äî 1490 ‚ÇΩ/–º–µ—Å. <br>–û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –≤ –±–æ—Ç–µ.</p>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤ —Ç–µ–º—ã Telegram
        document.documentElement.style.setProperty('--ios-bg', tg.themeParams.bg_color || '#000000');
        document.documentElement.style.setProperty('--ios-secondary-bg', tg.themeParams.secondary_bg_color || '#1C1C1E');

        function openSetup(cat, emoji) {
            const setupScreen = document.getElementById('setup-screen');
            document.getElementById('setup-title').innerText = cat;
            document.getElementById('setup-subtitle').innerText = `–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è ${cat}`;
            
            setupScreen.classList.add('active');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥" –≤ Telegram
            tg.BackButton.show();
            tg.BackButton.onClick(() => {
                closeSetup();
            });

            // –õ–µ–≥–∫–∞—è –≤–∏–±—Ä–∞—Ü–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
            tg.HapticFeedback.impactOccurred('medium');
        }

        function closeSetup() {
            document.getElementById('setup-screen').classList.remove('active');
            tg.BackButton.hide();
        }

        function launchBot() {
            const name = document.getElementById('proj-name').value;
            const token = document.getElementById('bot-token').value;
            const category = document.getElementById('setup-title').innerText;

            if(!name || !token) {
                tg.showAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞.");
                return;
            }

            // –í–∏–±—Ä–∞—Ü–∏—è —É—Å–ø–µ—Ö–∞
            tg.HapticFeedback.notificationOccurred('success');

            tg.sendData(JSON.stringify({
                action: 'init',
                category: category,
                proj_name: name,
                bot_token: token,
                source: 'mti_mobile_app'
            }));
            
            tg.close();
        }
    </script>
</body>
</html>
