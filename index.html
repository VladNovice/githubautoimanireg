<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>MTI Automation</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --ios-bg: #000000; --ios-secondary-bg: #1C1C1E; --ios-blue: #0A84FF; --ios-gray: #8E8E93; --ios-text: #FFFFFF; --ios-border: rgba(255, 255, 255, 0.1);
        }
        body { background: var(--ios-bg); color: var(--ios-text); font-family: -apple-system, sans-serif; padding: 20px; display: flex; flex-direction: column; align-items: center; margin: 0; }
        header { width: 100%; margin-bottom: 25px; }
        h1 { font-size: 34px; margin: 0; }
        .subtitle { color: var(--ios-gray); font-size: 16px; }
        .category-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; max-width: 500px; }
        .ios-card { background: var(--ios-secondary-bg); border-radius: 20px; padding: 20px; aspect-ratio: 1/1; display: flex; flex-direction: column; justify-content: space-between; border: 0.5px solid var(--ios-border); cursor: pointer; }
        #setup-screen { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--ios-bg); z-index: 100; padding: 20px; box-sizing: border-box; }
        .ios-group { background: var(--ios-secondary-bg); border-radius: 12px; overflow: hidden; margin-bottom: 20px; width: 100%; }
        .ios-row { padding: 12px 16px; border-bottom: 0.5px solid var(--ios-border); display: flex; flex-direction: column; }
        .ios-row label { font-size: 12px; color: var(--ios-gray); text-transform: uppercase; }
        .ios-row input { background: transparent; border: none; color: white; font-size: 17px; outline: none; }
        .ios-btn-main { background: var(--ios-blue); color: white; border: none; border-radius: 14px; padding: 16px; font-size: 17px; font-weight: 600; width: 100%; cursor: pointer; }
        .trial-info { font-size: 13px; color: var(--ios-gray); text-align: center; margin-top: 15px; }
    </style>
</head>
<body>

    <div id="main-screen" style="width: 100%; max-width: 500px;">
        <header>
            <h1>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è</h1>
            <p class="subtitle">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø –±–∏–∑–Ω–µ—Å–∞</p>
        </header>
        <div class="category-grid">
            <div class="ios-card" onclick="openSetup('–ë—å—é—Ç–∏')">
                <div style="font-size:32px">‚ú®</div>
                <div><h2>–ë—å—é—Ç–∏</h2><span>–ó–∞–ø–∏—Å—å –∏ —É—Å–ª—É–≥–∏</span></div>
            </div>
            <div class="ios-card" onclick="openSetup('–ö—Ä–∏–ø—Ç–æ')">
                <div style="font-size:32px">üíé</div>
                <div><h2>–ö—Ä–∏–ø—Ç–æ</h2><span>DAO –∏ —Å–∏–≥–Ω–∞–ª—ã</span></div>
            </div>
        </div>
    </div>

    <div id="setup-screen">
        <div onclick="closeSetup()" style="color:var(--ios-blue); margin-bottom:20px; cursor:pointer;">‚Äπ –ù–∞–∑–∞–¥</div>
        <h1 id="setup-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∞</h1>
        <div class="ios-group">
            <div class="ios-row"><label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label><input type="text" id="proj-name" placeholder="MyBot"></div>
            <div class="ios-row"><label>Telegram Token</label><input type="text" id="bot-token" placeholder="–æ—Ç @BotFather"></div>
        </div>
        <div class="ios-group">
            <div class="ios-row" style="flex-direction:row; justify-content:space-between;">
                <span>–ü–æ–¥–ø–∏—Å–∫–∞: <b>1 –Ω–µ–¥–µ–ª—è FREE</b></span>
                <span style="color:var(--ios-blue)">0 ‚ÇΩ</span>
            </div>
        </div>
        <button class="ios-btn-main" onclick="launchBot()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω–æ</button>
        <p class="trial-info">–î–∞–ª–µ–µ 1490 ‚ÇΩ/–º–µ—Å. –û—Ç–º–µ–Ω–∞ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.</p>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        function openSetup(cat) {
            document.getElementById('setup-screen').style.display = 'block';
            document.getElementById('setup-title').innerText = cat;
        }

        function closeSetup() { document.getElementById('setup-screen').style.display = 'none'; }

        function launchBot() {
            const name = document.getElementById('proj-name').value;
            const token = document.getElementById('bot-token').value;
            if(!name || !token) { tg.showAlert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è"); return; }

            tg.sendData(JSON.stringify({
                action: 'init',
                category: document.getElementById('setup-title').innerText,
                proj_name: name,
                bot_token: token
            }));
            tg.close();
        }
    </script>
</body>
</html>
